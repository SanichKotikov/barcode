{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./packages/ean/src/constants.ts","webpack:///./packages/ean/src/encoder.ts","webpack:///./packages/ean/src/ean13.ts","webpack:///./packages/ean/src/ean8.ts","webpack:///./packages/ean/src/ean5.ts","webpack:///./packages/ean/src/ean2.ts","webpack:///./packages/svg/src/constants.ts","webpack:///./packages/svg/src/helpers.ts","webpack:///./packages/svg/src/index.ts","webpack:///./examples/modules/ean.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","SIDE_BIN","MIDDLE_BIN","BINARIES","L","G","R","O","E","EAN2_STRUCTURE","EAN5_STRUCTURE","EAN13_STRUCTURE","data","structure","separator","encoded","split","map","val","idx","last","length","join","leftSide","substr","rightSide","encode","options","encodings","leftData","leftStructure","rightData","left","right","getEncodings","flat","text","encodeFlat","readable","unshift","quietZone","push","encodeGuarded","valid","search","reduce","sum","a","parseInt","SVG_NS","isEmptyData","RegExp","test","convert","size","result","lastIndex","group","x","y","el","document","createElementNS","setAttribute","fill","toString","append","createTextNode","barToPath","guarded","reduction","height","HEIGHT","X","svg","emptyStart","width","self","gX","encoding","toDPath","eWidth","g","EAN8","id","input","getElementById","ean13","ean8","ean5","ean2"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,U,6CClF9C,MAAMC,EAAW,MACXC,EAAa,QAEbC,EAAW,CACvBC,EAAG,CACF,UAAW,UAAW,UAAW,UAAW,UAC5C,UAAW,UAAW,UAAW,UAAW,WAE7CC,EAAG,CACF,UAAW,UAAW,UAAW,UAAW,UAC5C,UAAW,UAAW,UAAW,UAAW,WAE7CC,EAAG,CACF,UAAW,UAAW,UAAW,UAAW,UAC5C,UAAW,UAAW,UAAW,UAAW,WAE7CC,EAAG,CACF,UAAW,UAAW,UAAW,UAAW,UAC5C,UAAW,UAAW,UAAW,UAAW,WAE7CC,EAAG,CACF,UAAW,UAAW,UAAW,UAAW,UAC5C,UAAW,UAAW,UAAW,UAAW,YAIjCC,EAAiB,CAAC,KAAM,KAAM,KAAM,MAEpCC,EAAiB,CAC7B,QAAS,QAAS,QAAS,QAAS,QACpC,QAAS,QAAS,QAAS,QAAS,SAGxBC,EAAkB,CAC9B,SAAU,SAAU,SAAU,SAAU,SACxC,SAAU,SAAU,SAAU,SAAU,UCnB1B,MAdf,SAAgBC,EAAcC,EAAmBC,GAChD,IAAIC,EAAUH,EACZI,MAAM,IACNC,IAAI,CAACC,EAAKC,IAAQhB,EAASU,EAAUM,KACrCF,IAAI,CAACC,EAAKC,IAASD,EAAMA,EAAIN,EAAKO,IAAQ,IAE5C,GAAIL,EAAW,CACd,MAAMM,EAAOR,EAAKS,OAAS,EAC3BN,EAAUA,EAAQE,IAAI,CAACC,EAAKC,IAASA,EAAMC,EAAOF,EAAMJ,EAAYI,GAGrE,OAAOH,EAAQO,KAAK,KCKrB,SAASC,EAASX,GACjB,OAAOA,EAAKY,OAAO,EAAG,GAGvB,SAASC,EAAUb,GAClB,OAAOA,EAAKY,OAAO,EAAG,GAsDR,OACdE,OA1CD,SAAgBd,EAAce,G,MAC7B,MAAMC,EAXP,SAAsBhB,GACrB,MAAMiB,EAAWN,EAASX,GACpBkB,EAAgBnB,EAAgBC,EAAK,IACrCmB,EAAYN,EAAUb,GAC5B,MAAO,CACNoB,KAAM,EAAUH,EAAUC,GAC1BG,MAAO,EAAUF,EAAW,WAKXG,CAAatB,GAE/B,OAAc,QAAP,EAAAe,SAAO,eAAEQ,MA8BjB,SAAoBvB,EAAcgB,GACjC,MAAO,CAAC,CACPhB,KAAM,CAACX,EAAU2B,EAAUI,KAAM9B,EAAY0B,EAAUK,MAAOhC,GAAUqB,KAAK,IAC7Ec,KAAMxB,IAhCJyB,CAAWzB,EAAMgB,GAQrB,SACChB,EACAgB,EACAD,G,UAEA,MAAMZ,EAAuB,CAC5B,CAAEH,KAAMX,GACR,CAAEW,KAAMgB,EAAUI,KAAMI,KAAMb,EAASX,IACvC,CAAEA,KAAMV,GACR,CAAEU,KAAMgB,EAAUK,MAAOG,KAAMX,EAAUb,IACzC,CAAEA,KAAMX,KAGY,QAAjB,EAAO,QAAX,EAAI0B,SAAO,eAAEW,gBAAQ,YACpBvB,EAAQwB,QAAQ,CAAE3B,KAAM,WAAYwB,KAAMxB,EAAK,MACpC,QAAX,EAAIe,SAAO,eAAEa,YAAWzB,EAAQ0B,KAAK,CAAE7B,KAAM,WAAYwB,KAAM,OAGhE,OAAOrB,EAzBJ2B,CAAc9B,EAAMgB,EAAWD,IAsClCgB,MAnCD,SAAe/B,GACd,OAAuC,IAAhCA,EAAKgC,OAAO,iBAA0BhC,EAAK,MA9B1C,GA8B2DA,EAlCjEY,OAAO,EAAG,IACVR,MAAM,IACNC,IAAIvB,IAAMA,GACVmD,OAAO,CAACC,EAAKC,EAAG5B,IAASA,EAAM,EAAI2B,EAAU,EAAJC,EAAQD,EAAMC,EAAI,GACzC,IAAO,KCE5B,SAAS,EAASnC,GACjB,OAAOA,EAAKY,OAAO,EAAG,GAGvB,SAAS,EAAUZ,GAClB,OAAOA,EAAKY,OAAO,EAAG,GAwCR,OACdE,OAzBD,SAAgBd,EAAce,G,MAC7B,MAAMC,EAdP,SAAsBhB,GACrB,MAAMiB,EAAW,EAASjB,GACpBmB,EAAY,EAAUnB,GAC5B,MAAO,CACNoB,KAAM,EAAUH,EAAU,QAC1BI,MAAO,EAAUF,EAAW,SASX,CAAanB,GAC/B,OAAc,QAAP,EAAAe,SAAO,eAAEQ,MAejB,SAAoBvB,EAAcgB,GACjC,MAAO,CAAC,CACPhB,KAAM,CAACX,EAAU2B,EAAUI,KAAM9B,EAAY0B,EAAUK,MAAOhC,GAAUqB,KAAK,IAC7Ec,KAAMxB,IAjBJ,CAAWA,EAAMgB,GAIrB,SAAuBhB,EAAcgB,GACpC,MAAO,CACN,CAAEhB,KAAMX,GACR,CAAEW,KAAMgB,EAAUI,KAAMI,KAAM,EAASxB,IACvC,CAAEA,KAAMV,GACR,CAAEU,KAAMgB,EAAUK,MAAOG,KAAM,EAAUxB,IACzC,CAAEA,KAAMX,IATN,CAAcW,EAAMgB,IAsBvBe,MA9BD,SAAe/B,GACd,OAAsC,IAA/BA,EAAKgC,OAAO,gBAAyBhC,EAAK,KArBzC,GAqByDA,EAzB/DY,OAAO,EAAG,GACVR,MAAM,IACNC,IAAIvB,IAAMA,GACVmD,OAAO,CAACC,EAAKC,EAAG5B,IAASA,EAAM,EAAI2B,EAAMC,EAAID,EAAU,EAAJC,EAAQ,GACzC,IAAO,KCYb,OACdrB,OATD,SAAgBd,GACf,MAAMC,EAAYH,EAfnB,SAAkBE,GAOjB,OANeA,EACbI,MAAM,IACNC,IAAIvB,IAAMA,GACVmD,OAAO,CAACC,EAAKC,EAAG5B,IACTA,EAAM,EAAI2B,EAAU,EAAJC,EAAQD,EAAU,EAAJC,EACnC,GACY,GAQiB,CAASnC,IAC1C,MAAO,CAAC,CACPA,KAAM,OAAS,EAAUA,EAAMC,EAAW,MAC1CuB,KAAMxB,KAMP+B,MAdD,SAAe/B,GACd,OAAsC,IAA/BA,EAAKgC,OAAO,gBCCL,OACdlB,OAbD,SAAgBd,GACf,MAAMC,EAAYJ,EAAeuC,SAASpC,GAAQ,GAClD,MAAO,CAAC,CACPA,KAAM,OAAS,EAAUA,EAAMC,EAAW,MAC1CuB,KAAMxB,KAUP+B,MAND,SAAe/B,GACd,OAAsC,IAA/BA,EAAKgC,OAAO,gBCbb,MAAMK,EAAS,6BCGf,SAASC,EAAYtC,GAC1B,OAAO,IAAIuC,OAAO,QAAQC,KAAKxC,GAG1B,SAASyC,EAAQzC,GACtB,IAAI0C,EAAO,EACX,MAAMC,EAAqB,GACrBC,EAAY5C,EAAKS,OAAS,EAEhC,IAAK,IAAIpD,EAAI,EAAGA,EAAI2C,EAAKS,OAAQpD,IAC/B,IAAgB,MAAZ2C,EAAK3C,KACPqF,IACIrF,IAAMuF,KAGRF,EAAO,EAAG,CACZ,MAAMnC,EAAMlD,GAAMA,IAAMuF,GAAyB,MAAZ5C,EAAK3C,GAAcqF,EAAO,EAAIA,GACnEC,EAAOd,KAAK,CAAEtB,MAAKmC,SACnBA,EAAO,EAIX,OAAOC,EAGF,SAASE,EAAMC,EAAWC,EAAWhC,G,MAC1C,MAAMiC,EAAKC,SAASC,gBAAgBb,EAAQ,KAG5C,OAFAW,EAAGG,aAAa,YAAa,aAAaL,MAAMC,OACrC,QAAX,EAAIhC,SAAO,eAAEqC,OAAMJ,EAAGG,aAAa,OAAQpC,EAAQqC,MAC5CJ,EAGF,SAAS,EAAKF,EAAWC,EAAWvB,GACzC,MAAMwB,EAAKC,SAASC,gBAAgBb,EAAQ,QAM5C,OALAW,EAAGG,aAAa,IAAKL,EAAEO,YACvBL,EAAGG,aAAa,KAAMJ,EAAI,GAAGM,YAC7BL,EAAGG,aAAa,cAAe,UAC/BH,EAAGG,aAAa,QAAS,wBACzBH,EAAGM,OAAOL,SAASM,eAAe/B,IAC3BwB,EAGF,SAASQ,EAAUC,EAAkBxB,GAC1C,MAAMyB,ED5Ca,GC4CQzB,UAAU,GAC/B0B,EAASF,EAAUG,ID5CL,IC8CpB,MAAO,EAAGrD,MAAKmC,WACb,MAAMmB,EDhDW,ECgDPtD,EACV,MAAO,IAAIsD,ODjDM,ECiDEnB,EAAgBgB,KAAaC,KAAUE,MCN/C,MAzCf,SACEC,EACA9C,EACAD,G,UAEA,MAAMW,EAA4B,OAApB,EAAU,QAAV,EAAGX,SAAO,eAAEW,WAAQ,EAC5BqC,EAAazB,EAAYtB,EAAU,GAAGhB,MAEtCgE,EFVa,EEULhD,EAAUiB,OAAO,CAACC,EAAK5B,EAAKC,EAAK0D,IAE3C/B,GAAgB,IAAR3B,GAAaA,IAAQ0D,EAAKxD,OAAS,IAC3C6B,EAAYhC,EAAIN,MAAYM,EAAIN,KAAKS,OAAb,GAEzB,GAEGkD,EFhBc,KEgBKjC,EFXF,GEWyB,GAEhDoC,EAAIX,aAAa,QAAUa,EAAQ,GAAkB,MACrDF,EAAIX,aAAa,SAAWQ,EAAS,EAAkB,MAEvD,IAAIO,EAAKH,EAAa,EFpBA,GEsBtB,IAAK,IAAI1G,EAAI,EAAGA,EAAI2D,EAAUP,OAAQpD,IAAK,CACzC,MAAM8G,EAAWnD,EAAU3D,GACrB+G,EAAUZ,EAAU9B,IAAayC,EAAS3C,KAAa,QAAT,EAAET,SAAO,eAAEkB,QACzDoC,EF3BW,EE2BFF,EAASnE,KAAKS,OAEvB6D,EAAIzB,EAAMqB,EF1BI,EE0BUnD,GACxBiC,EAAKC,SAASC,gBAAgBb,EAAQ,QAC5CW,EAAGG,aAAa,IAAKV,EAAQ0B,EAASnE,MAAMK,IAAI+D,GAAS1D,KAAK,KAC9D4D,EAAEhB,OAAON,GAELtB,GACEyC,EAAS3C,MAAM8C,EAAEhB,OAAO,EAAKe,EAAS,EAAGV,EAAQQ,EAAS3C,OAGhEsC,EAAIR,OAAOgB,GACXJ,GAAMG,IChCV,MAGME,EAAO,WAEb,SAAS,EACPC,EACAC,EACArH,EACA2D,GAEA,MAAM+C,EAAMb,SAASyB,eAAeF,GACpC,IAAKV,IAAQ1G,EAAO2E,MAAM0C,GAAQ,OAClC,MAAMzD,EAAY5D,EAAO0D,OAAO2D,EAAO1D,GACvC,EAAU+C,EAAK9C,EAAW,CAAEiB,OAdf,SAiBf,EAAO,SAfO,gBAeU0C,EAAO,CAAE/C,WAAW,IAC5C,EAAO,cAhBO,gBAgBe+C,EAAO,CAAEpD,MAAM,IAE5C,EAAO,QAASgD,EAAMK,GACtB,EAAO,aAAcL,EAAMK,EAAM,CAAErD,MAAM,IAEzC,EAAO,QAASgD,EAAK3D,OAAO,EAAG,GAAIiE,GACnC,EAAO,QAASN,EAAK3D,OAAO,EAAG,GAAIkE","file":"main.ce6d1a56.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"ccd20f\");\n","export const SIDE_BIN = '101';\nexport const MIDDLE_BIN = '01010';\n\nexport const BINARIES = {\n\tL: [\n\t\t'0001101', '0011001', '0010011', '0111101', '0100011',\n\t\t'0110001', '0101111', '0111011', '0110111', '0001011',\n\t],\n\tG: [\n\t\t'0100111', '0110011', '0011011', '0100001', '0011101',\n\t\t'0111001', '0000101', '0010001', '0001001', '0010111',\n\t],\n\tR: [\n\t\t'1110010', '1100110', '1101100', '1000010', '1011100',\n\t\t'1001110', '1010000', '1000100', '1001000', '1110100',\n\t],\n\tO: [\n\t\t'0001101', '0011001', '0010011', '0111101', '0100011',\n\t\t'0110001', '0101111', '0111011', '0110111', '0001011',\n\t],\n\tE: [\n\t\t'0100111', '0110011', '0011011', '0100001', '0011101',\n\t\t'0111001', '0000101', '0010001', '0001001', '0010111',\n\t]\n};\n\nexport const EAN2_STRUCTURE = ['LL', 'LG', 'GL', 'GG'];\n\nexport const EAN5_STRUCTURE = [\n\t'GGLLL', 'GLGLL', 'GLLGL', 'GLLLG', 'LGGLL',\n\t'LLGGL', 'LLLGG', 'LGLGL', 'LGLLG', 'LLGLG',\n];\n\nexport const EAN13_STRUCTURE = [\n\t'LLLLLL', 'LLGLGG', 'LLGGLG', 'LLGGGL', 'LGLLGG',\n\t'LGGLLG', 'LGGGLL', 'LGLGLG', 'LGLGGL', 'LGGLGL',\n];\n","import { BINARIES } from './constants';\n\nfunction encode(data: string, structure: string, separator?: string) {\n\tlet encoded = data\n\t\t.split('')\n\t\t.map((val, idx) => BINARIES[structure[idx]])\n\t\t.map((val, idx) => (val ? val[data[idx]] : ''));\n\n\tif (separator) {\n\t\tconst last = data.length - 1;\n\t\tencoded = encoded.map((val, idx) => (idx < last ? val + separator : val));\n\t}\n\n\treturn encoded.join('');\n}\n\nexport default encode;\n","import { EAN13_STRUCTURE, SIDE_BIN, MIDDLE_BIN } from './constants';\nimport { IOptions, IEncoding, ISideEncoding } from './types';\nimport encodeEAN from './encoder';\n\ninterface IEAN13Options extends IOptions {\n\tflat?: boolean;\n\tquietZone?: boolean;\n}\n\nfunction checksum(number: string) {\n\tconst res = number\n\t\t.substr(0, 12)\n\t\t.split('')\n\t\t.map(n => +n)\n\t\t.reduce((sum, a, idx) => (idx % 2 ? sum + a * 3 : sum + a), 0);\n\treturn (10 - (res % 10)) % 10;\n}\n\nfunction leftSide(data: string) {\n\treturn data.substr(1, 6);\n}\n\nfunction rightSide(data: string) {\n\treturn data.substr(7, 6);\n}\n\nfunction getEncodings(data: string): ISideEncoding {\n\tconst leftData = leftSide(data);\n\tconst leftStructure = EAN13_STRUCTURE[data[0]];\n\tconst rightData = rightSide(data);\n\treturn {\n\t\tleft: encodeEAN(leftData, leftStructure),\n\t\tright: encodeEAN(rightData, 'RRRRRR'),\n\t};\n}\n\nfunction encode(data: string, options?: IEAN13Options) {\n\tconst encodings = getEncodings(data);\n\n\treturn options?.flat\n\t\t? encodeFlat(data, encodings)\n\t\t: encodeGuarded(data, encodings, options);\n}\n\nfunction valid(data: string) {\n\treturn data.search(/^[0-9]{13}$/) !== -1 && +data[12] === checksum(data);\n}\n\nfunction encodeGuarded(\n\tdata: string,\n\tencodings: ISideEncoding,\n\toptions?: IEAN13Options,\n): IEncoding[] {\n\tconst encoded: IEncoding[] = [\n\t\t{ data: SIDE_BIN },\n\t\t{ data: encodings.left, text: leftSide(data) },\n\t\t{ data: MIDDLE_BIN },\n\t\t{ data: encodings.right, text: rightSide(data) },\n\t\t{ data: SIDE_BIN }\n\t];\n\n\tif (options?.readable ?? true) {\n\t\tencoded.unshift({ data: '00000000', text: data[0] });\n\t\tif (options?.quietZone) encoded.push({ data: '00000000', text: '>' });\n\t}\n\n\treturn encoded;\n}\n\nfunction encodeFlat(data: string, encodings: ISideEncoding): IEncoding[] {\n\treturn [{\n\t\tdata: [SIDE_BIN, encodings.left, MIDDLE_BIN, encodings.right, SIDE_BIN].join(''),\n\t\ttext: data,\n\t}];\n}\n\n\nexport default {\n\tencode,\n\tvalid,\n};\n","import { SIDE_BIN, MIDDLE_BIN } from './constants';\nimport { IOptions, IEncoding, ISideEncoding } from './types';\nimport encodeEAN from './encoder';\n\ninterface IEAN8Options extends IOptions {\n\tflat?: boolean;\n}\n\nfunction checksum(number: string) {\n\tconst res = number\n\t\t.substr(0, 7)\n\t\t.split('')\n\t\t.map(n => +n)\n\t\t.reduce((sum, a, idx) => (idx % 2 ? sum + a : sum + a * 3), 0);\n\treturn (10 - (res % 10)) % 10;\n}\n\nfunction leftSide(data: string) {\n\treturn data.substr(0, 4);\n}\n\nfunction rightSide(data: string) {\n\treturn data.substr(4, 4);\n}\n\nfunction getEncodings(data: string): ISideEncoding {\n\tconst leftData = leftSide(data);\n\tconst rightData = rightSide(data);\n\treturn {\n\t\tleft: encodeEAN(leftData, 'LLLL'),\n\t\tright: encodeEAN(rightData, 'RRRR'),\n\t}\n}\n\nfunction valid(data: string) {\n\treturn data.search(/^[0-9]{8}$/) !== -1 && +data[7] === checksum(data);\n}\n\nfunction encode(data: string, options?: IEAN8Options) {\n\tconst encodings = getEncodings(data);\n\treturn options?.flat\n\t\t? encodeFlat(data, encodings)\n\t\t: encodeGuarded(data, encodings);\n}\n\nfunction encodeGuarded(data: string, encodings: ISideEncoding): IEncoding[] {\n\treturn [\n\t\t{ data: SIDE_BIN },\n\t\t{ data: encodings.left, text: leftSide(data) },\n\t\t{ data: MIDDLE_BIN },\n\t\t{ data: encodings.right, text: rightSide(data) },\n\t\t{ data: SIDE_BIN }\n\t];\n}\n\nfunction encodeFlat(data: string, encodings: ISideEncoding): IEncoding[] {\n\treturn [{\n\t\tdata: [SIDE_BIN, encodings.left, MIDDLE_BIN, encodings.right, SIDE_BIN].join(''),\n\t\ttext: data,\n\t}];\n}\n\nexport default {\n\tencode,\n\tvalid,\n};\n","import { EAN5_STRUCTURE } from './constants';\nimport { IEncoding } from './types';\nimport encodeEAN from './encoder';\n\nfunction checksum(data: string) {\n\tconst result = data\n\t\t.split('')\n\t\t.map(n => +n)\n\t\t.reduce((sum, a, idx) => {\n\t\t\treturn idx % 2 ? sum + a * 9 : sum + a * 3;\n\t\t}, 0);\n\treturn result % 10;\n}\n\nfunction valid(data: string) {\n\treturn data.search(/^[0-9]{5}$/) !== -1;\n}\n\nfunction encode(data: string): IEncoding[] {\n\tconst structure = EAN5_STRUCTURE[checksum(data)];\n\treturn [{\n\t\tdata: '1011' + encodeEAN(data, structure, '01'),\n\t\ttext: data,\n\t}];\n}\n\nexport default {\n\tencode,\n\tvalid,\n};\n","import { EAN2_STRUCTURE } from './constants';\nimport { IEncoding } from './types';\nimport encodeEAN from './encoder';\n\nfunction encode(data: string): IEncoding[] {\n\tconst structure = EAN2_STRUCTURE[parseInt(data) % 4];\n\treturn [{\n\t\tdata: '1011' + encodeEAN(data, structure, '01'),\n\t\ttext: data,\n\t}];\n}\n\nfunction valid(data: string) {\n\treturn data.search(/^[0-9]{2}$/) !== -1;\n}\n\nexport default {\n\tencode,\n\tvalid,\n};\n","export const SVG_NS = 'http://www.w3.org/2000/svg';\n\nexport const WIDTH = 2;\nexport const HEIGHT = 140;\nexport const MARGIN_X = 16;\nexport const MARGIN_Y = 4;\n\nexport const FONT = 'Monospace';\nexport const TEXT_SIZE = 20;\n","import { SVG_NS, WIDTH, HEIGHT, FONT, TEXT_SIZE } from './constants';\nimport { IBarItem, ISvgRenderOptions } from './types';\n\nexport function isEmptyData(data: string) {\n  return new RegExp('^0+$').test(data);\n}\n\nexport function convert(data: string): ReadonlyArray<IBarItem> {\n  let size = 0;\n  const result: IBarItem[] = [];\n  const lastIndex = data.length - 1;\n\n  for (let i = 0; i < data.length; i++) {\n    if (data[i] === '1') {\n      size++;\n      if (i !== lastIndex) continue;\n    }\n\n    if (size > 0) {\n      const idx = i - ((i === lastIndex && data[i] === '1') ? size - 1 : size);\n      result.push({ idx, size });\n      size = 0;\n    }\n  }\n\n  return result;\n}\n\nexport function group(x: number, y: number, options?: Readonly<ISvgRenderOptions>) {\n  const el = document.createElementNS(SVG_NS, 'g');\n  el.setAttribute('transform', `translate(${x}, ${y})`);\n  if (options?.fill) el.setAttribute('fill', options.fill);\n  return el;\n}\n\nexport function text(x: number, y: number, text: string) {\n  const el = document.createElementNS(SVG_NS, 'text');\n  el.setAttribute('x', x.toString());\n  el.setAttribute('y', (y - 2).toString());\n  el.setAttribute('text-anchor', 'middle');\n  el.setAttribute('style', `font: ${TEXT_SIZE}px ${FONT}`);\n  el.append(document.createTextNode(text));\n  return el;\n}\n\nexport function barToPath(guarded: boolean, reduce?: number) {\n  const reduction = WIDTH * (reduce ?? 0);\n  const height = guarded ? HEIGHT + (TEXT_SIZE / 2) : HEIGHT;\n\n  return ({ idx, size }: IBarItem) => {\n    const X = idx * WIDTH;\n    return `M${X} 0h${(size * WIDTH) - reduction}v${height}H${X}z`;\n  }\n}\n","import { SVG_NS, WIDTH, HEIGHT, MARGIN_X, MARGIN_Y, TEXT_SIZE } from './constants';\nimport { isEmptyData, convert, group, text, barToPath } from './helpers';\nimport { IEncoding, ISvgRenderOptions } from './types';\n\nfunction render(\n  svg: HTMLElement,\n  encodings: ReadonlyArray<IEncoding>,\n  options?: Readonly<ISvgRenderOptions>,\n) {\n  const readable = options?.readable ?? true;\n  const emptyStart = isEmptyData(encodings[0].data);\n\n  const width = encodings.reduce((sum, val, idx, self) => {\n    return (\n      sum + ((idx === 0 || idx === self.length - 1) &&\n      isEmptyData(val.data) ? 0 : val.data.length)\n    );\n  }, 0) * WIDTH;\n\n  const height = HEIGHT + (readable ? TEXT_SIZE : 0);\n\n  svg.setAttribute('width', (width + (MARGIN_X * 2)) + 'px');\n  svg.setAttribute('height', (height + (MARGIN_Y * 2)) + 'px');\n\n  let gX = emptyStart ? 0 : MARGIN_X;\n\n  for (let i = 0; i < encodings.length; i++) {\n    const encoding = encodings[i];\n    const toDPath = barToPath(readable && !encoding.text, options?.reduce);\n    const eWidth = encoding.data.length * WIDTH;\n\n    const g = group(gX, MARGIN_Y, options);\n    const el = document.createElementNS(SVG_NS, 'path');\n    el.setAttribute('d', convert(encoding.data).map(toDPath).join(''));\n    g.append(el);\n\n    if (readable) {\n      if (encoding.text) g.append(text(eWidth / 2, height, encoding.text));\n    }\n\n    svg.append(g);\n    gX += eWidth;\n  }\n}\n\nexport default render;\n","import { ean13, ean8, ean5, ean2 } from '../../packages/ean/src';\nimport { IEncoding } from '../../packages/svg/src/types';\nimport renderSvg from '../../packages/svg/src';\n\ninterface IModule {\n  valid: (input: string) => boolean;\n  encode: (input: string, options?: any) => IEncoding[];\n}\n\nconst REDUCE = 0.28651;\n\nconst EAN13 = '9234567890120';\nconst EAN8 = '12345670';\n\nfunction render(\n  id: string,\n  input: string,\n  module: IModule,\n  options?: any,\n) {\n  const svg = document.getElementById(id);\n  if (!svg || !module.valid(input)) return;\n  const encodings = module.encode(input, options);\n  renderSvg(svg, encodings, { reduce: REDUCE });\n}\n\nrender('ean-13', EAN13, ean13, { quietZone: true });\nrender('ean-13-flat', EAN13, ean13, { flat: true });\n\nrender('ean-8', EAN8, ean8);\nrender('ean-8-flat', EAN8, ean8, { flat: true });\n\nrender('ean-5', EAN8.substr(0, 5), ean5);\nrender('ean-2', EAN8.substr(0, 2), ean2);\n"],"sourceRoot":""}